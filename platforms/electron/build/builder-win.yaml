# Windows 打包配置
# 参考: https://www.electron.build/configuration/win

appId: com.dhu.quiz
productName: 东华红课题库刷题系统

# 禁用自动发布到 GitHub，仅构建产物
publish: null

directories:
  output: dist
  buildResources: assets

files:
  - from: .
    filter:
      - '**/*'
      - '!dist/**'
      - '!scripts/**'
      - '!.git/**'
      - '!.vscode/**'
      - '!__pycache__/**'
      - '!**/__pycache__/**'
      - '!*.pyc'
      - '!**/*.pyc'
      - '!**/python/test_imports.py'
  - from: ../web/frontend
    to: frontend
    filter:
      - '**/*'
      - '!node_modules/**'

asar: true

asarUnpack:
  - python/**
  - python_parser.py
  - backend_parser.py

win:
  target: nsis
  icon: assets/icon.ico
  artifactName: 东华红课题库刷题系统-${version}-${os}.${ext}

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  installerIcon: assets/icon.ico
  uninstallerIcon: assets/icon.ico
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: 东华红课题库刷题系统

mac:
  target: dmg
  icon: assets/icon.icns

linux:
  target: AppImage
  icon: assets/icons/

publish:
  provider: github
  owner: dhu-quiz
  repo: dhu-Redlesson-Questionbank
